#!/bin/bash


# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
# 
#     http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# This file is meant to be sourced.
# It sets environment variables so Mesos will search for uninstalled
# dependencies (such as the WebUI) rather than looking in installed locations.


# resolve links - $0 may be a softlink
PRG="$0"

while [ -h "$PRG" ]; do
  ls=`ls -ld "$PRG"`
  link=`expr "$ls" : '.*-> \(.*\)$'`
  if expr "$link" : '/.*' > /dev/null; then
    PRG="$link"
  else
    PRG=`dirname "$PRG"`/"$link"
  fi
done

# Get standard environment variables
PRGDIR=`dirname "$PRG"`

# Load external environments if available. 
if   [ -x "$HOME/.mesos/env.sh" ] ; then
	MESOS_ENV_SH="$HOME/.mesos/env.sh"
elif [ -f "/etc/sysconfig/mesos.sh" ] ; then
	MESOS_ENV_SH="/etc/sysconfig/mesos.sh"
fi

if [ -x "$MESOS_ENV_SH" ]; then
	echo "MESOS Env Shell available at ${MESOS_ENV_SH}."
	. "$MESOS_ENV_SH"
fi


MESOS_HOME=${MESOS_HOME-@prefix@}

MESOS_WEBUI_DIR=$MESOS_HOME/webui
MESOS_LAUNCHER_DIR=$MESOS_HOME/lib
MESOS_KILLTREE=$MESOS_HOME/scripts/killtree.sh

export MESOS_HOME
export MESOS_WEBUI_DIR
export MESOS_LAUNCHER_DIR
export MESOS_KILLTREE
